<Window x:Class="Chat_v1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Chat Client" Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent">

    <Border CornerRadius="20" Padding="10">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#ffffff" Offset="0.0"/>
                <GradientStop Color="#E0F7FF" Offset="1.0"/>
            </LinearGradientBrush>
        </Border.Background>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Top Section -->
            <StackPanel Orientation="Horizontal" Grid.ColumnSpan="2" Margin="0,0,0,10">
                <TextBox x:Name="client_name" Width="120" Margin="0,0,10,0" Text="Client Name"
                         Background="#E0F7FF" BorderBrush="Transparent"/>
                <TextBox x:Name="group" Width="120" Margin="0,0,10,0" Text="Group ID"
                         Background="#E0F7FF" BorderBrush="Transparent"/>
                <Button x:Name="Connect" Width="80" Margin="0,0,10,0" Content="Connect"
                        Background="#00AEEF" Foreground="White" Click="Connect_Click"/>
                <Button x:Name="Disconnect" Width="80" Margin="0,0,10,0" Content="Disconnect"
                        Background="#FF4444" Foreground="White" Click="Disconnect_Click"/>
                <ComboBox x:Name="GroupSelector" Width="150" Margin="0,0,10,0"
                          Background="#E0F7FF" BorderBrush="Transparent"
                          SelectionChanged="GroupSelector_SelectionChanged"/>
            </StackPanel>

            <!-- Sidebar -->
            <Border Grid.Row="1" Grid.Column="0" Background="#D0F0FF" Padding="10" Margin="0,0,10,0" CornerRadius="10" Grid.RowSpan="2">
                <StackPanel>
                    <TextBlock Text="Members in Group" FontWeight="Bold" Foreground="#0066CC" FontSize="16"/>
                    <ListBox x:Name="UserList" Height="487" Background="#E0F7FF" Foreground="#004080" BorderBrush="Transparent"/>
                </StackPanel>
            </Border>

            <!-- Chat Area -->
            <Border Grid.Row="1" Grid.Column="1" Background="#D0F0FF" Padding="10" CornerRadius="10">
                <StackPanel>
                    <TextBlock Text="Chat" FontWeight="Bold" Foreground="#0066CC" FontSize="16" Margin="0,0,0,10"/>
                    <ScrollViewer Height="420" VerticalScrollBarVisibility="Auto" Background="#E0F7FF">
                        <StackPanel x:Name="MessagesPanel"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>

            <!-- Bottom Message Box -->
            <Grid Grid.Row="2" Grid.Column="1" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Message Box -->
                <Border Grid.Column="0" Background="#E0F7FF" CornerRadius="12" Padding="8" VerticalAlignment="Center">
                    <TextBox x:Name="message" FontSize="14" BorderThickness="0" Background="Transparent"
                             Foreground="#004080" VerticalContentAlignment="Center" Padding="4"
                             TextWrapping="Wrap" AcceptsReturn="False" Text="Message"/>
                </Border>

                <!-- Attach File Button -->
                <Button Grid.Column="1" Content="📎" Width="36" Height="36" Margin="5,0,5,0"
                        Background="Transparent" BorderBrush="Transparent" ToolTip="Upload File"
                        Click="UploadFile_Click"/>

                <!-- Emoji Button -->
                <!-- Fixed Button Definition -->
                <Button Grid.Column="2" Content="😊" Width="36" Height="36" 
        Margin="5,0,5,0" Background="Transparent" BorderBrush="Transparent" 
        FontSize="20" Click="EmojiToggle_Click"/>


                <!-- Send Button -->
                    <Button Grid.Column="3" Content="SEND" Width="75" Height="36" Margin="5,0,0,0"
                        Background="#00AEEF" Foreground="White" FontWeight="Bold"
                        BorderThickness="0" Click="Send_Click"/>
            </Grid>

            <!-- Emoji Popup -->
            <Popup x:Name="EmojiPopup" PlacementTarget="{Binding ElementName=message}" Placement="Top" StaysOpen="False">
                <Border Background="White" BorderBrush="Gray" BorderThickness="1" Padding="5" CornerRadius="5">
                    <WrapPanel>
                        <Button Content="😀" Click="Emoji_Click" />
                        <Button Content="😂" Click="Emoji_Click" />
                        <Button Content="😍" Click="Emoji_Click" />
                        <Button Content="😎" Click="Emoji_Click" />
                        <Button Content="👍" Click="Emoji_Click" />
                        <Button Content="🎉" Click="Emoji_Click" />
                        <Button Content="💬" Click="Emoji_Click" />
                        <Button Content="❤️" Click="Emoji_Click" />
                        <!-- Add more emojis as needed -->
                    </WrapPanel>
                </Border>
            </Popup>
        </Grid>
    </Border>
</Window>